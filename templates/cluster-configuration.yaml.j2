---
apiVersion: kubeadm.k8s.io/v1beta3
kind: InitConfiguration
nodeRegistration:
  criSocket: unix:///var/run/crio/crio.sock
---
apiVersion: kubeadm.k8s.io/v1beta3
kind: ClusterConfiguration
kubernetesVersion: {{ kube_version }}
controlPlaneEndpoint: {{ kube_control_plane_endpoint }}:6443
{% if kube_oidc_auth_enabled -%}
apiServer:
  "oidc-issuer-url": "{{ kube_oidc_issuer_url }}"
  "oidc-client-id": "{{ kube_oidc_client_id }}"
  "oidc-username-claim": "{{ kube_oidc_username_claim }}"
  "oidc-groups-claim": "{{ kube_oidc_groups_claim }}"
{%- endif %}
